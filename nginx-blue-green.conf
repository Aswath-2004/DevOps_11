# nginx-blue-green.conf
# Define the two upstream servers (Blue and Green)
upstream app_backend {
    # Use 172.17.0.1 (the common IP for the host gateway on the default Docker network)
    server 172.17.0.1:3001; 
}
server {
    listen 80; # Nginx listens inside the container on port 80
    server_name localhost;

    location / {
        # Pass all traffic to the active upstream server
        proxy_pass http://app_backend;
        proxy_set_header Host $host;
    }
}
